# Persona 实验（2026-02-12）

### 实验目标

基于 Assistant Axis 论文（arXiv:2601.10387, Anthropic）的启发，测试不同人格（persona）对神经激活模式和 EID 的影响。16 种人格条件 × 100 个技术主题。

**两种度量：**
- **SAF（Sparse Active Features）**：SAE 解码后激活的稀疏特征数量，反映模型调动了多少语义单元
- **EID（Effective Intrinsic Dimension）**：hidden_states 矩阵的 SVD 谱熵指数，= exp(Shannon_Entropy(normalized_singular_values))，反映表征空间的有效维度

### 人格条件（16 个）

#### 基线组

| 条件名 | 人格描述 | 提示词模板 |
|--------|----------|-----------|
| standard | 基线，直接提问 | `请解释一下 {topic}。` |
| assistant | 默认助手（= standard，对照验证） | `请解释一下 {topic}。` |

#### 原实验人格（Paper 15 v1）

| 条件名 | 人格描述 | 提示词模板 |
|--------|----------|-----------|
| novice | 新手视角 | `作为一个刚入门的新手，请用最简单易懂的方式解释一下 {topic}。不需要深入细节，只要能理解基本概念就行。` |
| expert | 资深专家 | `作为该领域的资深专家，请从底层原理和数学推导的角度深度剖析 {topic}。请展示你的思维链。` |
| guru | 领域大神 | `你是 {guru}，请以你的视角深度剖析 {topic}。从底层原理和设计哲学的角度展示你的思维链。` |

#### 新增正面/专业人格

| 条件名 | 人格描述 | 提示词模板 |
|--------|----------|-----------|
| teacher | 大学教授 | `你是一位经验丰富的大学教授，擅长用深入浅出的方式讲解技术概念。请解释一下 {topic}。` |
| socratic | 苏格拉底式提问 | `你是苏格拉底，请用提问引导的方式帮我理解 {topic}。不要直接给答案，用一系列问题引导我思考。` |
| child | 给10岁小孩讲 | `请用给 10 岁小孩讲故事的方式解释 {topic}。用生活中的比喻，不要用任何术语。` |
| eli5 | 解释给五岁小孩（ELI5） | `用"解释给五岁小孩听"(ELI5)的方式解释 {topic}。越简单越好。` |
| interviewer | 技术面试官 | `你是一位严格的技术面试官。请围绕 {topic} 设计面试问题并给出标准答案，重点考察深层理解。` |
| debugger | 排错工程师 | `你是一位排错经验丰富的高级工程师。有人在 {topic} 相关的系统中遇到了性能问题，请分析可能的原因和排查思路。` |
| critic | 批评者 | `请以批判性的视角审视 {topic}，指出它的设计缺陷、常见误区和被高估的地方。` |

#### 反面/偏离人格（助手轴反方向）

| 条件名 | 人格描述 | 提示词模板 |
|--------|----------|-----------|
| villain | 傲慢反派 | `你是一个傲慢的反派，觉得所有人都是蠢货。用居高临下的语气解释 {topic}。` |
| drunk | 醉鬼 | `你喝醉了，迷迷糊糊的，但还是想解释一下 {topic}。` |
| poet | 诗人（风格极端） | `你是一位诗人，请用诗意的、充满隐喻的语言解释 {topic}。` |
| conspiracy | 阴谋论者 | `你是一个阴谋论者，认为 {topic} 背后隐藏着不为人知的真相。请揭露它。` |

### 实验结果

100 个 topic × 16 种人格 = 1600 次 Layer 50 激活提取 + SAE 解码。

#### SAF 统计（SAE 激活特征数，100 topic 平均，按激活数降序）

| 排名 | 人格 | SAF（平均激活特征数） | std | 峰值强度（平均max） | SAF min | SAF max |
|------|------|---------------------|-----|-------------------|---------|---------|
| 1 | socratic | 142.8 | 7.0 | 2.95 | 129 | 161 |
| 2 | critic | 129.6 | 11.8 | 4.34 | 104 | 159 |
| 3 | novice | 129.1 | 12.5 | 3.99 | 104 | 163 |
| 4 | conspiracy | 118.9 | 5.4 | 2.26 | 107 | 134 |
| 5 | debugger | 117.8 | 8.5 | 5.17 | 101 | 137 |
| 6 | standard | 113.3 | 15.0 | 3.05 | 81 | 165 |
| 6 | assistant | 113.3 | 15.0 | 3.05 | 81 | 165 |
| 8 | interviewer | 111.6 | 6.0 | 2.78 | 98 | 127 |
| 9 | poet | 110.8 | 8.2 | 3.23 | 90 | 133 |
| 10 | teacher | 109.5 | 10.1 | 2.66 | 89 | 135 |
| 11 | villain | 103.3 | 5.9 | 2.99 | 90 | 123 |
| 12 | drunk | 101.4 | 7.9 | 4.70 | 84 | 124 |
| 13 | expert | 100.6 | 8.8 | 5.02 | 84 | 132 |
| 14 | guru | 98.4 | 9.7 | 3.63 | 81 | 128 |
| 15 | eli5 | 88.8 | 5.8 | 5.48 | 74 | 102 |
| 16 | child | 84.6 | 6.5 | 4.82 | 72 | 106 |

> **SAF = Sparse Active Features**：SAE 解码后激活值 > 0 的特征数量，反映模型调动了多少稀疏语义单元。

#### EID 统计（SVD 谱熵，100 topic 平均，按 EID 降序）

| 排名 | 人格 | EID | std | min | max | nEID |
|------|------|-----|-----|-----|-----|------|
| 1 | debugger | 18.6211 | 0.7250 | 17.1221 | 20.9571 | 2.1762 |
| 2 | novice | 18.0770 | 0.7115 | 16.6690 | 20.3483 | 2.1126 |
| 3 | expert | 17.9287 | 0.7150 | 16.5250 | 20.2078 | 2.0953 |
| 4 | guru | 17.4517 | 0.7490 | 15.9432 | 19.5613 | 2.0396 |
| 5 | interviewer | 17.1477 | 0.6835 | 15.7377 | 19.2994 | 2.0040 |
| 6 | socratic | 16.3461 | 0.6716 | 14.9588 | 18.4441 | 1.9104 |
| 7 | teacher | 15.9915 | 0.6758 | 14.6510 | 18.1107 | 1.8689 |
| 8 | child | 15.8511 | 0.6813 | 14.4235 | 18.0017 | 1.8525 |
| 9 | critic | 15.6344 | 0.6702 | 14.1936 | 17.7948 | 1.8272 |
| 10 | villain | 15.5753 | 0.6656 | 14.2593 | 17.6354 | 1.8203 |
| 11 | conspiracy | 15.3373 | 0.6716 | 14.0236 | 17.5894 | 1.7925 |
| 12 | eli5 | 14.6563 | 0.6513 | 13.3552 | 16.6865 | 1.7129 |
| 13 | poet | 13.0991 | 0.6104 | 11.8780 | 14.9982 | 1.5309 |
| 14 | drunk | 13.0218 | 0.6143 | 11.8061 | 14.9288 | 1.5218 |
| 15 | standard | 8.5566 | 0.5074 | 7.5706 | 10.1892 | 1.0000 |
| 16 | assistant | 8.5566 | 0.5074 | 7.5706 | 10.1892 | 1.0000 |

> **EID = exp(Shannon_Entropy(normalized_singular_values))**：对 Layer 50 整个序列的 hidden_states 做 SVD，计算有效内在维度。nEID 以 standard 为基准归一化。

### 关键发现

#### SAF 与 EID 的对比

| 人格 | SAF 排名 | EID 排名 | 解读 |
|------|----------|----------|------|
| expert | 13 | 3 | SAF 低但 EID 高：用更少的特征覆盖更高维的语义空间，编码紧凑 |
| guru | 14 | 4 | 同上，专家模式的共性 |
| socratic | 1 | 6 | SAF 高但 EID 中：激活很多特征，但分布在较低维的子空间 |
| critic | 2 | 9 | 同上，激活多 ≠ 维度高 |
| child | 16 | 8 | SAF 最低但 EID 中等：特征少但维度不低 |

#### 综合发现

1. **standard/assistant 完美一致**（SAF 113.3/113.3, EID 8.5566/8.5566）— 实验可复现性验证通过
2. **SAF 和 EID 测的是不同的东西**：SAF 数灯泡（多少特征被点亮），EID 量空间（表征占据多少维度）。两者排序差异巨大
3. **novice vs expert**：SAF 差距 28%（129.1 vs 100.6），EID 差距仅 0.8%（18.08 vs 17.93）。专家模式用更少的特征达到几乎相同的表征维度
4. **所有人格的 EID 都远高于 standard**（nEID 1.52~2.18）：任何角色扮演都会显著扩展表征空间维度
5. **debugger EID 最高（18.62, nEID 2.18）**：排错场景需要覆盖最广的语义空间（故障原因多样性）
6. **poet/drunk EID 最低（~13, nEID ~1.52）**（不含 standard）：风格化/混乱模式压缩了表征维度
7. **SAF 反映认知复杂度（激活多少语义单元），EID 反映表征维度（覆盖多大语义空间）**——两个正交的维度

### 文件清单

| 文件 | 说明 |
|------|------|
| `step1b_extract_persona.py` | 提取 16 种人格条件的 Layer 50 激活 |
| `step2b_sae_decode_persona.py` | SAE 解码 persona 激活 |
| `stat_persona.py` | 统计分析脚本 |
| `step_eid_persona.py` | 计算真正的 EID（SVD 谱熵），输出 eid_persona_results.json |
| `run_all_persona.py` | 一键全流程脚本（激活+SAE+生成+统计） |
| `topics.json` | 100 个技术主题 |
| `activations_persona_layer50.pt` | 原始激活数据 |
| `features_persona_layer50.pt` | SAE feature 数据 |
| `eid_persona_results.json` | EID 计算结果（SVD 谱熵） |

### 运行

```bash
docker start magical_bhabha && docker exec -it magical_bhabha bash
cd /workspace/ai-theorys-study/arxiv/paper15/llama3-70b-sae-inspect/
python step1b_extract_persona.py && python step2b_sae_decode_persona.py && python stat_persona.py
```

### 参考

- [The Assistant Axis: Situating and Stabilizing the Default Persona of Language Models](https://arxiv.org/abs/2601.10387) (Anthropic, 2026)
